!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("prop-types"),require("slate-react"),require("slate"),require("@accordproject/ui-markdown-editor"),require("styled-components"),require("@accordproject/markdown-cicero"),require("lodash"),require("uuid"),require("slate-history"),require("@accordproject/markdown-slate"),require("@accordproject/markdown-html")):"function"==typeof define&&define.amd?define(["exports","react","prop-types","slate-react","slate","@accordproject/ui-markdown-editor","styled-components","@accordproject/markdown-cicero","lodash","uuid","slate-history","@accordproject/markdown-slate","@accordproject/markdown-html"],t):t((e=e||self).ContractEditor={},e.React,e.PropTypes,e.slateReact,e.slate,e.MarkdownEditor,e.styled,e.markdownCicero,e._,e["v4 as uuidv4"],e.slateHistory,e.markdownSlate,e.markdownHtml)}(this,(function(e,t,n,r,o,a,i,l,c,s,u,d,p){"use strict";var f="default"in t?t.default:t;function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function h(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;var v=h((function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0}));m(v);var g=h((function(e){e.exports=function(e){if(Array.isArray(e))return v(e)},e.exports.default=e.exports,e.exports.__esModule=!0}));m(g);var y=h((function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0}));m(y);var b=h((function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0}));m(b);var x=h((function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}));m(x);var E=m(h((function(e){e.exports=function(e){return g(e)||y(e)||b(e)||x()},e.exports.default=e.exports,e.exports.__esModule=!0}))),C=m(h((function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0}))),w=h((function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0}));m(w);var O=h((function(e){e.exports=function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}},e.exports.default=e.exports,e.exports.__esModule=!0}));m(O);var T=h((function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}));m(T);var F=m(h((function(e){e.exports=function(e,t){return w(e)||O(e,t)||b(e,t)||T()},e.exports.default=e.exports,e.exports.__esModule=!0}))),S=m(h((function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}))),j=m(h((function(e){e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},e.exports.default=e.exports,e.exports.__esModule=!0})));function N(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var k,P,L,_,I,R,D,M,A,H,B,U,q,z,W,G,V,Z,J;N("@font-face {\n    font-family: 'Graphik';\n    src: url('../../assets/fonts/Graphik-400.woff'),\n         url('../../assets/fonts/Graphik-400.woff2');\n  }\n  \n@font-face {\nfont-family: 'Graphik';\nsrc: url('../../assets/fonts/Graphik-600.woff'),\n     url('../../assets/fonts/Graphik-600.woff2');\nfont-weight: bold;\n}");var $,K=i.div(k||(k=j(["\n  position: relative;\n  margin: 10px -10px;\n  display: grid;\n  background-color: #F4F6FC;\n  border: ",';\n  border-radius: 3px;\n  grid-template-columns: 10px 375px 1fr 25px 25px 25px 10px;\n  grid-template-rows: 0px 10px 1fr;\n  grid-template-areas: "one two three four five six seven"\n                       "eight nine ten eleven twelve thirteen fourteen"\n                       "fifteen sixteen seventeen eighteen nineteen twenty twentyone";\n'])),(function(e){return e.error?"1px solid #FF0000":"1px solid #19C6C7"})),Y=(i.svg(P||(P=j(["\n  visibility: ",";\n"])),(function(e){return e.currentHover?"visible":"hidden"})),i.svg(L||(L=j(["\n  visibility: ",";\n"])),(function(e){return e.currentHover?"visible":"hidden"}))),Q=i.span(_||(_=j(["\n  visibility: ",";\n  margin-top: -","em;\n\n  &:before {\n    content: '';\n    position: absolute;\n    top: ","px;\n    left: ","px;\n    border-top: 5px solid #141F3C;\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n  }\n\n  &:after {\n    content: '';\n    position: absolute;\n    top: ","px;\n    left: ","px;\n    border-top: 4px solid #141F3C;\n    border-left: 4px solid transparent;\n    border-right: 4px solid transparent;\n  }\n"])),(function(e){return e.currentHover?"visible":"hidden"}),(function(e){return e.tooltipHeight}),(function(e){return e.caretTop}),(function(e){return e.caretLeft-1}),(function(e){return e.caretTop}),(function(e){return e.caretLeft})),X=i.svg(I||(I=j(["\n  visibility: ",";\n"])),(function(e){return e.currentHover?"visible":"hidden"})),ee=i.span(R||(R=j(["\n  visibility: ",";\n  margin-top: -","em;\n\n  &:before {\n    content: '';\n    position: absolute;\n    top: ","px;\n    left: ","px;\n    border-top: 5px solid #141F3C;\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n  }\n\n  &:after {\n    content: '';\n    position: absolute;\n    top: ","px;\n    left: ","px;\n    border-top: 4px solid #141F3C;\n    border-left: 4px solid transparent;\n    border-right: 4px solid transparent;\n  }\n"])),(function(e){return e.currentHover?"visible":"hidden"}),(function(e){return e.tooltipHeight}),(function(e){return e.caretTop}),(function(e){return e.caretLeft-1}),(function(e){return e.caretTop}),(function(e){return e.caretLeft})),te=i.div(D||(D=j(["\n  visibility: ",";\n  font-family: serif;\n  grid-area: two / two / ten / ten;\n  transition-duration: 0.5s;\n  background: linear-gradient(180deg, #FFFFFF 0%, #F4F6FC 100%);\n  align-self: center;\n  justify-self: start;\n  margin-bottom: 9px;\n  padding: 3px;\n  color: #696969;\n  line-height: 14px;\n  font-size: 0.87em;\n  font-weight: 600;\n"])),(function(e){return e.currentHover?"visible":"hidden"})),ne=i.div(M||(M=j(["\n  li {\n    transition: none;\n  }\n  font-family: serif;\n  grid-area: sixteen / sixteen / twenty / twenty;\n  margin: 2px 0 10px;\n  color: #141F3C;\n  font-size: 1em;\n  line-height: 22px;\n"]))),re=i.svg(A||(A=j(["\n  position: relative;\n  z-index: 1;\n  cursor: pointer;\n  fill: ",";\n"])),(function(e){return e.hovering?e.clauseIconColor||"#19C6C7":"#696969"})),oe=i(re)(H||(H=j(["\n  fill: #949CA2;\n  position: relative;\n  top: ","px;\n  &:hover {\n    fill: #414F58;\n  }\n"])),(function(e){var t;return null!==(t=e.position)&&void 0!==t?t:-6})),ae=i.div(B||(B=j(["\n  visibility: ",";\n  background: linear-gradient(180deg, #FFF 0%, #F4F6FC 100%);\n  position: relative;\n  z-index: 1;\n  margin-bottom: 9px;\n  padding: 4px;\n  place-self: center;\n  transition-duration: 0.5s;\n  cursor: pointer;\n"])),(function(e){return e.currentHover?"visible":"hidden"})),ie=i(ae)(U||(U=j(["\n  grid-area: four / four / eleven / eleven;\n"]))),le=i(ae)(q||(q=j(["\n  grid-area: five / five / twelve / twelve;\n"]))),ce=i(ae)(z||(z=j(["\n  grid-area: six / six / thirteen / thirteen;\n"]))),se=i(ae)(W||(W=j(["\n  grid-area: fifteen;\n  background: linear-gradient(to right, #FFF 0%, #F4F6FC 100%);\n  margin-right: 9px;\n  margin-bottom: 0px;\n  position: relative;\n  top: -5px;\n  max-height: 50px;\n  padding: 4px 0 0 0;\n  cursor: text;\n"]))),ue=(i.svg(G||(G=j(["\n  fill: #46608E;\n  cursor: pointer;\n  grid-area: editIcon;\n  place-self: center;\n\n  &:hover {\n    fill: #FFFFFF;\n  }\n"]))),i.div(V||(V=j(["\n  position: absolute;\n  top: -40px;\n  z-index: 99;\n"])))),de=i.div.attrs({contentEditable:"false",suppressContentEditableWarning:"true"})(Z||(Z=j(["\n  background-color: #121212;\n  padding: 10px;\n  border-radius: 3px;\n  color: #f0f0f0;\n  z-index: 99;\n  font-family: 'IBM Plex Sans', 'sans-serif';\n  transition: all 0.3s ease;\n  :after {\n    content: \" \";\n    display: block;\n    width: 0;\n    height: 0;\n    z-index: 99;\n    position: absolute;\n    top: 100%;\n    left: 5px;\n    border-radius: 0px;\n    border-width: 6px;\n    border-style: solid;\n    border-color: #121212 transparent transparent transparent;\n  }\n"]))),pe=i.span(J||(J=j(["\n"]))),fe=function(){return"trash"},me=function(){return"edit"},he=function(){return"test"},ve=function(){return"drag"},ge=function(){return"move-up"},ye=function(){return"move-down"},be=function(e){return function(e){return e.toUpperCase()}(function(e){return e.replace(/-/g," ")}(function(e){return e.slice(function(e){return e.lastIndexOf("/")}(e)+1,function(e){return e.indexOf("@")}(e))}(e)))},xe=function(e){return e.reduce((function(e,t){return"".concat(e).concat(t.text)}),"")},Ee=t.createContext(null),Ce=f.forwardRef((function(e,n){var a=e.clauseProps||Object.create(null),i=t.useState(!1),l=F(i,2),c=l[0],s=(l[1],t.useState(!1)),u=F(s,2),d=u[0],p=u[1],m=t.useState(!1),h=F(m,2),v=h[0],g=h[1],y=t.useState(!1),b=F(y,2),x=b[0],E=b[1],C=t.useState(!1),w=F(C,2),O=w[0],T=w[1],j=be(e.templateUri),N=function(e,t){var n=be(e),r=t?n+t:n;return r.length>54?"".concat(r.slice(0,54),"..."):r}(e.templateUri,a.HEADER_TITLE),k={currentHover:c,contentEditable:!1,suppressContentEditableWarning:!0,style:{userSelect:"none"}},P={"aria-label":he,width:"19px",height:"19px",viewBox:"0 0 16 20",clauseIconColor:a.ICON_HOVER_COLOR},L={"aria-label":me,width:"19px",height:"19px",viewBox:"0 0 19 19",clauseIconColor:a.ICON_HOVER_COLOR},_={"aria-label":fe,width:"19px",height:"19px",viewBox:"0 0 12 15",clauseIconColor:a.ICON_HOVER_COLOR},I={"aria-label":ve,width:"12px",height:"15px",viewBox:"0 0 12 15"},R={"aria-label":ge,width:"16px",height:"12px",viewBox:"0 0 16 12"},D={"aria-label":ye,width:"16px",height:"12px",viewBox:"0 0 16 12"},M=function(t,n){var a=r.ReactEditor.toSlateNode(e.editor,t.target),i=r.ReactEditor.findPath(e.editor,a),l=o.Editor.range(e.editor,i),c=o.Editor.end(e.editor,[]),s=[Math.max(l.anchor.path[0],l.focus.path[0])+(n?1:-1)];s[0]>=0&&s[0]<=c.path[0]&&o.Transforms.moveNodes(e.editor,{at:i,to:s})};return f.createElement(Ee.Provider,{value:c},f.createElement(K,S({src:e.templateUri,id:e.name,className:"ui-contract-editor__clause ".concat(e.error?"error":""),style:{userSelect:"".concat(e.readOnly?"text":"none"),padding:"3px"},draggable:"false",ref:n,error:e.error},e.attributes),f.createElement(te,{className:"ui-contract-editor__clause-header",currentHover:c,contentEditable:!1,suppressContentEditableWarning:!0,style:{userSelect:"none"}},d&&N.length>54&&f.createElement(ue,null,f.createElement(de,null,j+a.HEADER_TITLE)),f.createElement(pe,{onMouseEnter:function(){return p(!0)},onMouseLeave:function(){return p(!1)}},N)),e.readOnly||0===N.length?null:f.createElement(f.Fragment,null,f.createElement(se,k,f.createElement(oe,S({},R,{position:-3,onClick:M}),f.createElement("g",{id:"Side-nav-+-new-editor",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},f.createElement("g",{id:"Drag-and-drop",transform:"translate(-300.000000, -442.000000)"},f.createElement("g",{id:"move_up",transform:"translate(297.000000, 437.000000)"},f.createElement("g",{id:"Icon-24px"},f.createElement("polygon",{id:"Shape",fillRule:"nonzero",points:"4.41 12.41 9 7.83 13.59 12.41 15 11 9 5 3 11"}),f.createElement("polygon",{id:"Shape",points:"0 0 18 0 18 18 0 18",fill:"none"})))))),f.createElement(oe,I,f.createElement("g",{id:"Side-nav-+-new-editor",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},f.createElement("g",{id:"Drag-and-drop",transform:"translate(-300.250000, -457.000000)"},f.createElement("g",{id:"handle",transform:"translate(297.000000, 455.000000)"},f.createElement("rect",{id:"Rectangle",x:"0",y:"0",width:"18",height:"22",fill:"none"}),f.createElement("g",{id:"Group-5",transform:"translate(5.000000, 2.000000)",fillRule:"nonzero"},f.createElement("circle",{id:"Oval",cx:"1.5",cy:"1.5",r:"1.5"}),f.createElement("circle",{id:"Oval-Copy-2",cx:"1.5",cy:"6.5",r:"1.5"}),f.createElement("circle",{id:"Oval-Copy",cx:"6.5",cy:"1.5",r:"1.5"}),f.createElement("circle",{id:"Oval-Copy-3",cx:"6.5",cy:"6.5",r:"1.5"}),f.createElement("circle",{id:"Oval-Copy-5",cx:"1.5",cy:"11.5",r:"1.5"}),f.createElement("circle",{id:"Oval-Copy-6",cx:"1.5",cy:"16.5",r:"1.5"}),f.createElement("circle",{id:"Oval-Copy-4",cx:"6.5",cy:"11.5",r:"1.5"}),f.createElement("circle",{id:"Oval-Copy-7",cx:"6.5",cy:"16.5",r:"1.5"})))))),f.createElement(oe,S({},D,{position:-10,onClick:function(e){return M(e,!0)}}),f.createElement("g",{id:"Side-nav-+-new-editor",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},f.createElement("g",{id:"Drag-and-drop",transform:"translate(-300.000000, -481.000000)"},f.createElement("g",{id:"move_down",transform:"translate(297.000000, 477.000000)"},f.createElement("g",{id:"Icon-24px"}),f.createElement("polygon",{id:"Shape",fillRule:"nonzero",points:"4.41 4.84 9 9.42 13.59 4.84 15 6.25 9 12.25 3 6.25"}),f.createElement("polygon",{id:"Shape",points:"0 0 18 0 18 18 0 18",fill:"none"})))))),f.createElement(ie,S({},k,{onMouseEnter:function(){return g(!0)},onMouseLeave:function(){return g(!1)},onClick:function(){return a.CLAUSE_TEST_FUNCTION(e)}}),f.createElement(re,S({},P,{hovering:v}),f.createElement("g",{id:"Side-nav-+-new-editor",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},f.createElement("g",{id:"Lab-Flask-Experiment-2-Copy",fillRule:"nonzero"},f.createElement("path",{d:"M15.0833265,16.0833269 L11.4166613,10 C11.333328,9.8333294 11.333328,9.6666628 11.333328,9.5833295 L11.333328,2.0833325 C11.333328,1.8333326 11.4999946,1.666666 11.7499945,1.666666 L12.999994,1.666666 C13.4999938,1.666666 13.833327,1.3333328 13.833327,0.833333 C13.833327,0.3333332 13.4999938,0 12.999994,0 L2.999998,0 C2.4999982,0 2.166665,0.3333332 2.166665,0.833333 C2.166665,1.3333328 2.4999982,1.666666 2.999998,1.666666 L4.2499975,1.666666 C4.4999974,1.666666 4.666664,1.8333326 4.666664,2.0833325 L4.666664,9.5833295 C4.666664,9.7499961 4.666664,9.9166627 4.5833307,10 L0.9999988,16.0833269 C0.2499991,17.2499931 0.499999,18.7499925 1.5833319,19.5833255 C1.9999984,19.8333254 2.4999982,20 2.999998,20 L12.999994,20 C14.4166601,20 15.499993,18.8333258 15.499993,17.5 C15.499993,17 15.3333264,16.5 15.0833265,16.0833269 Z M5.2499971,13.333328 C4.9999972,13.333328 4.8333306,13.166666 4.8333306,12.9166615 C4.8333306,12.8333282 4.8333306,12.7499949 4.9166639,12.666666 L6.2499967,10.4166625 C6.3333306,10.3333292 6.3333306,10.166666 6.3333306,9.999996 L6.3333306,2.0833325 C6.3333306,1.8333326 6.4999966,1.666666 6.7499965,1.666666 L9.2499955,1.666666 C9.4999954,1.666666 9.666662,1.8333326 9.666662,2.0833325 L9.666662,9.999996 C9.666662,10.166666 9.666662,10.3333292 9.7499953,10.4166625 L11.0833281,12.666666 C11.1666614,12.8333282 11.1666614,13.0833281 10.9166615,13.2499947 C10.8333306,13.2499947 10.7499949,13.333328 10.6666616,13.333328 L5.2499971,13.333328 L5.2499971,13.333328 Z",id:"Shape"})))),v&&f.createElement(ue,null,f.createElement(de,null,"Test"))),f.createElement(le,S({},k,{onMouseEnter:function(){return E(!0)},onMouseLeave:function(){return E(!1)},onClick:function(){return a.CLAUSE_EDIT_FUNCTION(e)}}),f.createElement(re,S({},L,{hovering:x}),f.createElement("g",{id:"Side-nav-+-new-editor",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},f.createElement("path",{d:"M0.0346241458,14.256492 L0,18.1690205 C0,18.3767654 0.0692482916,18.6191344 0.242369021,18.757631 C0.415489749,18.8961276 0.623234624,19 0.830979499,19 L4.74350797,18.9653759 C4.95125285,18.9653759 5.15899772,18.8615034 5.33211845,18.7230068 L18.766287,5.28883827 C19.0779043,4.97722096 19.0779043,4.42323462 18.766287,4.11161731 L14.8883827,0.233712984 C14.5767654,-0.077904328 14.022779,-0.077904328 13.7111617,0.233712984 L11.0104784,2.93439636 L0.276993166,13.6678815 C0.103872437,13.8410023 0.0346241458,14.0487472 0.0346241458,14.256492 Z M17.0004556,4.70022779 L15.4769932,6.22369021 L12.7763098,3.52300683 L14.2997722,1.99954442 L17.0004556,4.70022779 L17.0004556,4.70022779 Z M1.69658314,14.6027335 L11.5990888,4.70022779 L14.2997722,7.40091116 L4.39726651,17.3034169 L1.69658314,17.3034169 L1.69658314,14.6027335 Z",id:"Shape-Copy",fillRule:"nonzero"}))),x&&f.createElement(ue,null,f.createElement(de,null,"Edit"))),f.createElement(ce,S({},k,{onMouseEnter:function(){return T(!0)},onMouseLeave:function(){return T(!1)},onClick:function(){return a.CLAUSE_DELETE_FUNCTION(e)}}),f.createElement(re,S({},_,{hovering:O}),f.createElement("g",{stroke:"none",strokeWidth:"1",fillRule:"evenodd"},f.createElement("g",{transform:"translate(-222.000000, -602.000000)",fillRule:"nonzero"},f.createElement("path",{d:"M233.913531,604.599251 C234.037294,605.044944 234.082298,605 233.669757,604.996255 L222.328624,604.996255 C221.916083,604.996255 221.964838,605.044944 222.08485,604.599251 C222.178609,604.265918 222.223614,604.11236 222.223614,604.11236 C222.321123,603.764045 222.583649,603.730337 222.947436,603.670412 L224.942635,603.419476 C225.19016,603.374532 225.19016,603.374532 225.28767,603.164794 C225.613952,602.426966 225.711462,602 226.067748,602 L229.930633,602 C230.286919,602 230.388179,602.426966 230.714462,603.161049 C230.811971,603.374532 230.811971,603.374532 231.059496,603.41573 L233.050945,603.666667 C233.418482,603.726592 233.666007,603.726592 233.763516,604.074906 C233.763516,604.074906 233.823522,604.262172 233.913531,604.599251 Z M232.684263,606.808989 C233.306825,606.808989 233.336828,606.88764 233.299324,607.359551 L232.598004,616.445693 C232.537998,616.906367 232.492993,617 231.941688,617 L224.170912,617 C223.619607,617 223.574603,616.906367 223.514597,616.445693 L222.813277,607.359551 C222.775773,606.891386 222.805776,606.808989 223.428338,606.808989 L232.684263,606.808989 Z"})))),O&&f.createElement(ue,null,f.createElement(de,null,"Delete")))),f.createElement(ne,null,e.children)))}));Ce.displayName="ClauseComponent",Ce.propTypes={attributes:n.PropTypes.shape({"data-key":n.string}),children:n.PropTypes.object.isRequired,name:n.string,clauseProps:n.shape({CLAUSE_DELETE_FUNCTION:n.func,CLAUSE_EDIT_FUNCTION:n.func,CLAUSE_TEST_FUNCTION:n.func}),editor:n.any,error:n.bool,readOnly:n.bool,templateUri:n.string.isRequired};var we,Oe="clause",Te="variable",Fe=(C($={},Te,!0),C($,"conditional",!0),C($,"optional",!0),C($,"formula",!0),$),Se={},je=function(e){var t=e.isVoid,n=e.isInline;return e.isVoid=function(e){return Se[e.type]||t(e)},e.isInline=function(e){return Fe[e.type]||n(e)},e},Ne=function(e){var t=e.selection;return!!t&&(!!c.isEqual(t.anchor.path,t.focus.path)&&o.Node.parent(e,e.selection.focus.path).type===Te)},ke=function(e){try{return!0===new l.Decorators(e.data).getDecoratorValue("ContractEditor","readOnly")}catch(e){return!1}};function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e=function(e,t,n,r){void 0!==e[t]&&(n[r||t]=e[t])},Ie=i.span(we||(we=j(["\n  border: "," 1px solid !important;\n  background-color: "," !important;\n  opacity: "," !important;\n  ","\n  "])),(function(e){return e.border}),(function(e){return e["background-color"]}),(function(e){return e.opacity}),(function(e){return e["font-family"]?"font-family:".concat(e["font-family"],"!important;"):""})),Re=f.forwardRef((function(e,t){var n=e.attributes,r=e.children,o=e.editor,a=e.element,i=e.isFormulaDependency,c=function(e){try{return new l.Decorators(e.data).getArguments("ContractEditor")}catch(e){return{}}}(a),s={};s.border="#A4BBE7",s["background-color"]="#FFFFFF",s.border="#A4BBE7",s.opacity=1,i(o,a)&&(s.border="#AF54C4",s["background-color"]="#BED3FC",s.border="#A4BBE7"),c&&(_e(c,"border",s),_e(c,"backgroundColor",s,"background-color"),_e(c,"opacity",s),_e(c,"fontFamily",s,"font-family"));var u=Le(Le(Le({className:Te,name:a.data.name},n),s),{},{ref:t});return f.createElement(Ie,u,r)}));Re.displayName="Variable",Re.propTypes={attributes:n.PropTypes.shape({"data-key":n.string}),children:n.object.isRequired,editor:n.any,element:n.any,isFormulaDependency:n.func};var De=function(){return"addConditional"},Me=function(e){return f.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},f.createElement("g",{id:"conditional-icon-default",transform:"translate(2.000000, 1.000000)",fillRule:"nonzero"},f.createElement("g",{id:"Oval"},f.createElement("use",{fill:"black",fillOpacity:"1",filter:"url(#filter-2)",xlinkHref:"#path-1"}),f.createElement("circle",{stroke:e?"#B11A00":"#FF6044",strokeWidth:"1",strokeLinejoin:"square",fill:e?"#B11A00":"#FFFFFF",fillRule:"evenodd",cx:"7",cy:"7",r:"6.5"})),f.createElement("polygon",{id:"+-copy",fill:e?"#FFFFFF":"#B11A00",points:"6.24723247 6.24723247 6.24723247 3 7.75276753 3 7.75276753 6.24723247 11 6.24723247 11 7.75276753 7.75276753 7.75276753 7.75276753 11 6.24723247 11 6.24723247 7.75276753 3 7.75276753 3 6.24723247"})))},Ae=function(e){var n=t.useState(!1),r=F(n,2),o=r[0],a=r[1],i=t.useState(0),l=F(i,2),c=l[0],s=l[1],u=t.useRef(null);t.useEffect((function(){s(u.current?u.current.offsetHeight:0)}),[]);var d={"aria-label":De,viewBox:"0 0 18 18",className:"conditionalIcon",onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},onClick:e.toggleConditional},p={ref:u,currentHover:o,className:"variableTooltip",style:{marginTop:"-".concat(c+10,"px")},caretTop:c-2,caretLeft:2};return f.createElement(Ee.Consumer,null,(function(t){return f.createElement(f.Fragment,null,f.createElement(Q,S({contentEditable:!1},p),'Show text: "',e.whenTrue,'"'),f.createElement(Y,S({contentEditable:!1,currentHover:t},d),Me(o)))}))};Ae.propTypes={whenTrue:n.string,toggleConditional:n.func};var He=function(e){var t,n={className:"variableTooltip",currentHover:e.currentHover,caretTop:21,caretLeft:2,tooltipHeight:1.85},r=xe(e.whenTrue).length,o=xe(e.whenFalse).length,a=e.isTrue?xe(e.whenFalse):xe(e.whenTrue);return f.createElement(f.Fragment,null,f.createElement(Q,S({contentEditable:!1},n),(t=a,r&&o?'Change to: "'.concat(t,'"'):e.isContentShowing?"Hide text":'Change to: "'.concat(t,'"'))))};function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}He.propTypes={currentHover:n.bool,isContentShowing:n.bool,whenTrue:n.string,whenFalse:n.string,isTrue:n.bool};var qe=f.forwardRef((function(e,n){var a=e.attributes,i=e.children,l=e.children.props.node,c=e.children.props.node.data,s=r.useEditor(),u=t.useState(!1),d=F(u,2),p=d[0],m=d[1],h=r.ReactEditor.findPath(s,l),v=!e.readOnly,g=c.isTrue?!!xe(c.whenTrue).length:!!xe(c.whenFalse).length,y=function(e){var t={object:"inline",type:"conditional",data:{name:c.name,whenTrue:c.whenTrue,whenFalse:c.whenFalse,isTrue:!c.isTrue},children:c.isTrue?c.whenFalse:c.whenTrue};o.Editor.withoutNormalizing(s,(function(){o.Transforms.removeNodes(s,{at:e}),o.Transforms.insertNodes(s,t,{at:e})}))},b=Ue(Ue({id:c.name,className:g?"conditional":"",onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)},onClick:function(){return y(h)}},a),{},{ref:n}),x=Ue({currentHover:p,isContentShowing:g},c),E={currentHover:p,whenTrue:xe(c.whenTrue),toggleConditional:function(){return y(h)}};return f.createElement("span",a,v&&(g?f.createElement(He,x):f.createElement(Ae,E)),f.createElement("span",b,i))}));qe.displayName="Conditional",qe.propTypes={attributes:n.PropTypes.shape({"data-key":n.string}),children:n.object.isRequired,editor:n.any,node:n.shape({data:n.obj}),readOnly:n.bool};var ze=function(e){var n=t.useState(!1),r=F(n,2),o=r[0],a=r[1],i=t.useState(0),l=F(i,2),c=l[0],s=l[1],u=t.useRef(null);t.useEffect((function(){s(u.current?u.current.offsetHeight:0)}),[]);var d={"aria-label":De,viewBox:"0 0 18 18",className:"optionalIcon",onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},onClick:e.toggleOptional},p={ref:u,currentHover:o,className:"optionalTooltip",style:{marginTop:"-".concat(c+10,"px")},caretTop:c-2,caretLeft:2};return f.createElement(Ee.Consumer,null,(function(t){return f.createElement(f.Fragment,null,f.createElement(ee,S({contentEditable:!1},p),'Show text: "',e.whenSome,'"'),f.createElement(X,S({contentEditable:!1,currentHover:t},d),Me(o)))}))};ze.propTypes={whenSome:n.string,toggleOptional:n.func};var We=function(e){var t={className:"optionalTooltip",currentHover:e.currentHover,caretTop:21,caretLeft:2,tooltipHeight:1.85},n=e.hasSome?e.hasNone:e.hasSome,r=e.isContentShowing?"Hide text":'Change to: "'.concat(n,'"');return f.createElement(f.Fragment,null,f.createElement(ee,S({contentEditable:!1},t),r))};function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Je(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}We.propTypes={currentHover:n.bool,isContentShowing:n.bool,whenTrue:n.string,hasNone:n.string,hasSome:n.bool};var $e,Ke=f.forwardRef((function(e,n){var a=e.attributes,i=e.children,l=e.children.props.node,c=e.children.props.node.data,s=r.useEditor(),u=t.useState(!1),d=F(u,2),p=d[0],m=d[1],h=r.ReactEditor.findPath(s,l),v=!e.readOnly,g=!!o.Node.string(l).length,y={object:"inline",type:"optional",data:{name:c.name,whenSome:c.whenSome,whenNone:c.whenNone,hasSome:!c.hasSome},children:c.hasSome?c.whenNone:c.whenSome},b=function(e,t){t&&function(e){var t,n=r.ReactEditor.toSlateNode(s,e),a=r.ReactEditor.findPath(s,n),i=Ze(o.Node.ancestors(s,a,{reverse:!0}));try{for(i.s();!(t=i.n()).done;){if(F(t.value,1)[0].type===Te)return!0}}catch(e){i.e(e)}finally{i.f()}return!1}(t)||function(e){o.Editor.withoutNormalizing(s,(function(){o.Transforms.removeNodes(s,{at:e}),o.Transforms.insertNodes(s,y,{at:e})}))}(e)},x=Ve(Ve({id:c.name,className:g?"optional":"",onMouseEnter:function(e){return"optional"===(t=e.target).className&&m(!0),void(t.className===Te&&m(!1));var t},onMouseLeave:function(){return m(!1)},onClick:function(e){return b(h,e.target)}},a),{},{ref:n}),E=Ve({currentHover:p,isContentShowing:g},c),C={currentHover:p,whenSome:o.Node.string(y),toggleOptional:function(){return b(h)}};return f.createElement("span",a,v&&(g?f.createElement(We,E):f.createElement(ze,C)),f.createElement("span",x,i))}));function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Ke.displayName="Optional",Ke.propTypes={attributes:n.PropTypes.shape({"data-key":n.string}),children:n.object.isRequired,editor:n.any,node:n.shape({data:n.obj}),readOnly:n.bool};var Xe=i.span($e||($e=j(["\n  z-index: 2;\n  visibility: ",";\n  transform: translateY(-110%);\n  white-space: normal;\n\n  &:before {\n    content: '';\n    position: absolute;\n    bottom: -6.7px;\n    left: 1px;\n    border-top: 6px solid #141F3C;\n    border-left: 6px solid transparent;\n    border-right: 6px solid transparent;\n  }\n\n  &:after {\n    content: '';\n    position: absolute;\n    bottom: -6.7px;\n    left: 2px;\n    border-top: 4px solid #141F3C;\n    border-left: 4px solid transparent;\n    border-right: 4px solid transparent;\n  }\n"])),(function(e){return e.currentHover?"visible":"hidden"})),et=f.forwardRef((function(e,n){var r=e.attributes,o=e.children,a=e.children.props.node,i=e.children.props.node.data,l=e.setFormulaNode,c=e.setHoveringFormulaContract,s=t.useState(!1),u=F(s,2),d=u[0],p=u[1],m=Qe({onMouseEnter:function(){return p(!0),c(!0),void l(a)},onMouseLeave:function(){return p(!1),c(!1),void l({})}},r),h=Qe({id:i.name,className:"formula",ref:n},r),v={className:"variableTooltip",currentHover:d,contentEditable:!1};return f.createElement("span",m,f.createElement(Xe,v,i.code),f.createElement("span",h,o))}));et.displayName="Formula",et.propTypes={attributes:n.PropTypes.shape({"data-key":n.string}),children:n.object.isRequired,setHoveringFormulaContract:n.func,setFormulaNode:n.func,editor:n.any,node:n.shape({data:n.obj}),readOnly:n.bool};var tt=function e(t,n){if(n(t))return t;if(t.children){var r=[];return t.children.forEach((function(t){var o=e(t,n);Array.isArray(o)?r=r.concat(o):r.push(o)})),r}return[]};N("a {\n    color: #0f52ba;\n}\n\n.parseError {\n    background-color: #e98181;\n}\n\n.variable,\n.conditional,\n.optional {\n    border-radius: 2px;\n    background-color: #fff;\n    color: #000;\n}\n\n.conditional,\n.optional {\n    border: #FFDDA0 1px solid;\n    margin-left: 2px;\n    padding: 1px 3px;\n}\n\n.optional > .variable {\n    cursor: text;\n    box-shadow: inset 0px 0px 0px 1px #A4BBE7;\n    padding: 0px 2px;\n    border: #A4BBE7 0px solid;\n}\n\n.variable {\n    border: #A4BBE7 1px solid;\n    padding: 0px 3px;\n    border-radius: 2px;\n    background-color: #fff;\n}\n\n.formula {   \n    color: #AE00BE\n}\n\n.optional:hover,\n.conditional:hover {\n    cursor: pointer;\n    background-color: #d4d8e1;\n}\n\n.conditionalTooltip,\n.optionalTooltip,\n.variableTooltip {\n    opacity: 1 !important;\n    border: 1px solid #141F3C;\n    border-radius: 2px;\n    z-index:100;\n    background-color: #141F3C;\n    transition-duration: 0.25s;\n    color: #FFFFFF;\n    padding: 1px 3px;\n    position: absolute;\n}\n\n.conditionalIcon,\n.optionalIcon {\n    position: absolute;\n    display: inline-block;\n    transition-duration: 0.2s;\n    margin-left: -5px;\n    margin-top: -8px;\n    width: 18px;\n    height: 18px;\n}\n\n.conditionalIcon:hover,\n.optionalIcon:hover,\n.listIcon:hover {\n    cursor: pointer;\n}\n\n.listIcon {\n    position: absolute;\n    display: inline-block;\n    transition-duration: 0.2s;\n    margin-left: -35px;\n    margin-top: 4px;\n    width: 18px;\n    height: 16px;\n}\n.addListIcon{\n    display: block;\n    margin-top: 23px;\n}");var nt=function(e,t){var n=e.insertData,r=e.onChange,a=t.onClauseUpdated,i=t.pasteToContract;return e.getClauseWithPath=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.selection,n=o.Editor.nodes(e,{match:function(e){return e.type===Oe},at:t}),r=F(n,1),a=r[0];return a},e.isInsideClause=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.selection;return!!e.getClauseWithPath(t)},e.onChange=function(){if(r(),e.isInsideClause()){var t=e.getClauseWithPath(),n=F(t,2),i=n[0],l=n[1],c=o.Editor.nodes(e,{match:function(e){return e.type===Te}}),s=F(c,1)[0];if(s&&s[0].data&&s[0].data.name)for(var d=s[0].data.name,p=o.Editor.nodes(e,{match:function(e){return e.type===Te&&e.data.name===d},at:l}),f=p.next(),m=function(){var t=f.value;if(!o.Path.equals(t[1],s[1])&&o.Node.string(t[0])!==o.Node.string(s[0])){var n=JSON.parse(JSON.stringify(s[0]));u.HistoryEditor.withoutSaving(e,(function(){o.Editor.withoutNormalizing(e,(function(){o.Transforms.removeNodes(e,{at:t[1]}),o.Transforms.insertNodes(e,n,{at:t[1]})}))}))}f=p.next()};!f.done;)m();a&&a(i).then((function(t){var n=t.node,r=t.operation,a=t.error;if("replace_node"===r)o.Transforms.removeNodes(e,{at:l}),o.Transforms.insertNodes(e,n,{at:l});else if("update_formulas"===r&&s&&s[0].data&&s[0].data.name)for(var i=s[0].data.name,c=o.Editor.nodes(e,{match:function(e){return"formula"===e.type&&e.data.dependencies.includes(i)},at:l}),d=c.next(),p=function(){var t=d.value,r=function(e,t){var n=tt(e,(function(e){return"formula"===e.type&&e.data.name===t.data.name}));return n&&n.length>0?n[0]:null}(n,t[0]);if(r){var a=o.Node.string(t[0]);o.Node.string(r)!==a&&u.HistoryEditor.withoutSaving(e,(function(){o.Editor.withoutNormalizing(e,(function(){o.Transforms.removeNodes(e,{at:t[1]}),o.Transforms.insertNodes(e,r,{at:t[1]})}))}))}d=c.next()};!d.done;)p();u.HistoryEditor.withoutSaving(e,(function(){o.Transforms.setNodes(e,{error:!!a},{at:l})}))}))}},e.insertData=function(e){var t=e.getData("text/html");if(t)try{var r=[],o=new p.HtmlTransformer,l=new d.SlateTransformer,c={object:"value",document:{object:"document",data:{},children:l.fromCiceroMark(o.toCiceroMark(t)).document.children.map((function(e){return e.type===Oe&&(e.data.clauseid=s.v4(),r.push(e)),e}))}};r.forEach((function(e){i(e.data.clauseid,e.data.src),a(e,!0)}));var u=o.toHtml(l.toCiceroMark(c));return void n({getData:function(t){return"text/html"===t?u:e.getData("text/plain")}})}catch(e){console.error(e)}n(e)},e.isClauseSupported=function(e){return function e(t,n){n.forEach((function(n){var r=n.type;switch(n.object){case"text":break;default:switch(r){case"ol_list":case"ul_list":if(n.data.kind===Te)throw new Error("List variable not supported");if(t.depth>0)throw new Error("Nested list not supported");t.depth+=1}}n.children&&e(t,n.children),"ol_list"!==r&&"ul_list"!==r||(t.depth-=1)}))}({depth:0},e.document?e.document.children:[e]),!0},e.canAddClause=function(){return!e.selection||e.selection.anchor.path.length<=2},e},rt=function(e){var t=e.insertText,n=e.isInline;return e.insertText=function(n){var r=o.Editor.next(e,{at:e.selection.focus.path}),a=o.Node.parent(e,e.selection.focus.path),i=o.Node.get(e,e.selection.focus.path).text.length,l=r?ke(r[0]):null,c=a?ke(a):null;r&&r[0].type===Te&&i===e.selection.focus.offset&&(o.Transforms.select(e,r[1]),o.Transforms.collapse(e,{edge:"start"})),o.Node.parent(e,e.selection.focus.path).type!==Te||!1!==l&&void 0!==r||!1!==c?o.Node.parent(e,e.selection.focus.path).type!==Te&&t(n):o.Transforms.insertText(e,n)},e.isInline=function(e){return e.type===Te||n(e)},e},ot=function(e,t,n){if(!e||!t.isInsideClause())return!0;var r=t.selection,a=o.Node.get(t,t.selection.focus.path).text.length,i=Ne(t)&&!function(e){if(Ne(e)){var t=o.Node.parent(e,e.selection.focus.path);return ke(t)}return!1}(t);if(i){if(function(e){return a===e.selection.focus.offset}(t)&&"deleteContentForward"===n.inputType)return!1;if("deleteContentBackward"===n.inputType)return r.anchor.offset>0;if("insertFromPaste"===n.inputType||"insertParagraph"===n.inputType||"insertLineBreak"===n.inputType)return!1}var l=o.Editor.next(t,{at:t.selection.focus.path});return l&&l[0].type===Te&&a===t.selection.focus.offset?"deleteContentBackward"!==n.inputType:i};function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ct={value:{object:"value",document:{object:"document",data:{},nodes:[{object:"block",type:"paragraph",data:{},nodes:[{object:"text",text:"Welcome! Edit this text to get started.",marks:[]}]}]}},onChange:function(e){localStorage.setItem("contract-editor",e.toJSON())},plugins:[]},st=function(e){var n=t.useState(!1),i=F(n,2),l=i[0],c=i[1],s=t.useState(null),u=F(s,2),d=u[0],p=u[1],m={onClauseUpdated:e.onClauseUpdated,pasteToContract:e.pasteToContract},h=t.useCallback((function(e,t){var n,a=!1;if(!l||!d)return a;var i,c=r.ReactEditor.findPath(e,d),s=r.ReactEditor.findPath(e,t),u=it(o.Node.ancestors(e,c,{reverse:!0}));try{for(u.s();!(i=u.n()).done;){var p=F(i.value,1)[0];p.type===Oe&&(n=p.data.name)}}catch(e){u.e(e)}finally{u.f()}var f,m=it(o.Node.ancestors(e,s,{reverse:!0}));try{for(m.s();!(f=m.n()).done;){var h=F(f.value,1)[0];h.type===Oe&&h.data.name===n&&d.data.dependencies.includes(t.data.name)&&(a=!0)}}catch(e){m.e(e)}finally{m.f()}return a}),[l,d]);return f.createElement(a.MarkdownEditor,{augmentEditor:function(t){return e.augmentEditor?e.augmentEditor(rt(nt(je(t),m))):rt(nt(je(t),m))},isEditable:function(t,n){if(t.isInsideClause()){var r=t.getClauseWithPath();if(!1===F(r,1)[0].data.parseable)return!0}return function(e,t){if("deleteContentForward"===t.inputType&&o.Node.get(e,e.selection.focus.path).text.length===e.selection.focus.offset){var n=o.Editor.nodes(e,{at:o.Editor.next(e)[1],match:function(e){return e.type===Oe}});return!F(n,1)[0]}return!0}(t,n)&&ot(e.lockText,t,n)},value:e.value||ct.value,onChange:e.onChange||ct.onChange,customElements:function(t,n,r,o){var a,i={templateUri:r.data&&r.data.src?r.data.src:"",name:r.data&&r.data.name?r.data.name:"",error:r.error,clauseProps:e.clauseProps,readOnly:e.readOnly,hoveringFormulaContract:l,attributes:t,editor:o},s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({element:r,editor:o,isFormulaDependency:h},t),u={readOnly:e.readOnly,attributes:t},d={name:r.data&&r.data.name?r.data.name:"",className:"formula",setHoveringFormulaContract:c,setFormulaNode:p,attributes:t,editor:o},m={readOnly:e.readOnly,attributes:t};return C(a={},Oe,(function(){return f.createElement(Ce,i,n)})),C(a,Te,(function(){return f.createElement(Re,s,n)})),C(a,"conditional",(function(){return f.createElement(qe,u,n)})),C(a,"formula",(function(){return f.createElement(et,d,n)})),C(a,"optional",(function(){return f.createElement(Ke,m,n)})),a},lockText:e.lockText,readOnly:e.readOnly,canBeFormatted:function(t){return!e.lockText||!t.isInsideClause()},canCopy:function(e){return!(e.isInsideClause(e.selection.anchor)||e.isInsideClause(e.selection.focus))},canKeyDown:function(e,t){if(8===(t.keyCode||t.charCode)&&o.Point.equals(o.Editor.start(e,e.selection.anchor.path),e.selection.anchor)){var n=o.Editor.nodes(e,{at:o.Editor.previous(e)[1],match:function(e){return e.type===Oe}});return!F(n,1)[0]}return!0},onDragStart:function(e,t){t.stopPropagation();var n=r.ReactEditor.toSlateNode(e,t.target),a=r.ReactEditor.findPath(e,n),i=o.Editor.range(e,a);t.dataTransfer.setData("text",JSON.stringify(i))},onDragOver:function(e,t){t.stopPropagation(),t.dataTransfer.dropEffect="move"},onDrop:function(e,t){t.preventDefault();var n=r.ReactEditor.findEventRange(e,t),a=o.Editor.nodes(e,{match:function(e){return e.type===Oe},at:n});if(F(a,1)[0])return!1;var i=JSON.parse(t.dataTransfer.getData("text")),l=e.getClauseWithPath(i);if(!l)return!0;var c=r.ReactEditor.toSlateNode(e,t.target),s=r.ReactEditor.findPath(e,c),u=E(o.Node.ancestors(e,s,{reverse:!1})),d=u.length>1?u[1][0].type:null;if("ul_list"===d||"ol_list"===d){var p=u[1][0],f=r.ReactEditor.findPath(e,p);u[1][0].children.length/2>u[2][1][1]?l[1]>f[0]?o.Transforms.moveNodes(e,{at:l[1],to:f}):o.Transforms.moveNodes(e,{at:l[1],to:[f[0]-1]}):l[1]>f[0]?o.Transforms.moveNodes(e,{at:l[1],to:[f[0]+1]}):o.Transforms.moveNodes(e,{at:l[1],to:f})}else{var m=u[1],h=m?m[1]:s;h.length?o.Transforms.select(e,h):o.Transforms.select(e,n);var v="end";if(h===s||0===s[1]&&s[0]===h[0]){var g=o.Node.get(e,n.focus.path).text.length/2;n.focus.offset<g&&(v="start")}else{var y=E(o.Node.children(e,h)).length/2;s[1]<y&&(v="start")}o.Transforms.collapse(e,{edge:v}),o.Transforms.removeNodes(e,{at:i.anchor.path,match:function(e){return e.type===Oe}}),o.Transforms.insertNodes(e,l[0])}return!1},activeButton:e.activeButton,"data-testid":"editor"})};st.propTypes={activeButton:n.object,augmentEditor:n.func,value:n.array,onChange:n.func,lockText:n.bool,readOnly:n.bool,pasteToContract:n.func,clauseMap:n.object,clauseProps:n.shape({CLAUSE_DELETE_FUNCTION:n.func,CLAUSE_EDIT_FUNCTION:n.func,CLAUSE_TEST_FUNCTION:n.func}),onClauseUpdated:n.func,onUndoOrRedo:n.func,plugins:n.arrayOf(n.shape({onEnter:n.func,onKeyDown:n.func,name:n.string.isRequired,augmentSchema:n.func}))},e.default=st,e.getChildren=tt,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.cjs.js.map
